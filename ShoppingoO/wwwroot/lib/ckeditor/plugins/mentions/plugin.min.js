!function(){function r(t,e){var n,r,i,o,a,s=e.feed;function c(t,e){var n=t.slice(0,e).match(a);if(!n)return null;t=t[n.index-1];return void 0===t||t.match(/\s+/)?{start:n.index,end:e}:null}this.caseSensitive=e.caseSensitive,this.marker=e.hasOwnProperty("marker")?e.marker:"@",this.minChars=null!==e.minChars&&void 0!==e.minChars?e.minChars:2,(n=e.pattern)||(n=this.minChars,r="\\"+this.marker+"[_a-zA-Z0-9À-ž]",r=(n?r+"{"+n+",}":r+"*")+"$",n=new RegExp(r)),this.pattern=n,this.cache=void 0===e.cache||e.cache,this.throttle=void 0!==e.throttle?e.throttle:200,this._autocomplete=new CKEDITOR.plugins.autocomplete(t,{textTestCallback:(this.marker,this.minChars,a=this.pattern,function(t){return t.collapsed?CKEDITOR.plugins.textMatch.match(t,c):null}),dataCallback:(i=s,o=this,function(t,e){function n(t){t&&(t=CKEDITOR.tools.array.map(t,function(t){return CKEDITOR.tools.object.merge(t,{name:o.marker+t.name})}),e(t))}var r,a=t.query;o.marker&&(a=a.substring(o.marker.length)),CKEDITOR.tools.array.isArray(i)?n((r=1,CKEDITOR.tools.array.reduce(i,function(t,e){return t.push({name:e,id:r++}),t},[]).filter(function(t){return t=t.name,o.caseSensitive||(t=t.toLowerCase(),a=a.toLowerCase()),0===t.indexOf(a)}))):"string"==typeof i?function(){var e=new CKEDITOR.template(i).output({encodedQuery:encodeURIComponent(a)});if(o.cache&&u[e])return n(u[e]);CKEDITOR.ajax.load(e,function(t){t=JSON.parse(t),o.cache&&null!==t&&(u[e]=t),n(t)})}():i({query:a,marker:o.marker},n)}),itemTemplate:e.itemTemplate,outputTemplate:e.outputTemplate,throttle:this.throttle,itemsLimit:e.itemsLimit})}CKEDITOR._.mentions={cache:{}};var u=CKEDITOR._.mentions.cache;CKEDITOR.plugins.add("mentions",{requires:"autocomplete,textmatch,ajax",instances:[],init:function(e){var n=this;e.on("instanceReady",function(){CKEDITOR.tools.array.forEach(e.config.mentions||[],function(t){n.instances.push(new r(e,t))})})},isSupportedEnvironment:function(t){return t.plugins.autocomplete.isSupportedEnvironment(t)}}),r.prototype={destroy:function(){this._autocomplete.destroy()}},CKEDITOR.plugins.mentions=r}();
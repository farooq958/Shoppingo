!function(){function i(t,e,n){if(!t.getCustomData("indent_processed")){var i=this.editor,s=this.isIndent;if(e){if(n=0,(i=t.$.className.match(this.classNameRegex))&&(i=i[1],n=CKEDITOR.tools.indexOf(e,i)+1),(n+=s?1:-1)<0)return;n=Math.min(n,e.length),n=Math.max(n,0),t.$.className=CKEDITOR.tools.ltrim(t.$.className.replace(this.classNameRegex,"")),0<n&&t.addClass(e[n-1])}else{e=a(t,n),n=parseInt(t.getStyle(e),10);var r=i.config.indentOffset||40;if(isNaN(n)&&(n=0),(n+=(s?1:-1)*r)<0)return;n=Math.max(n,0),n=Math.ceil(n/r)*r,t.setStyle(e,n?n+(i.config.indentUnit||"px"):""),""===t.getAttribute("style")&&t.removeAttribute("style")}CKEDITOR.dom.element.setMarker(this.database,t,"indent_processed",1)}}function a(t,e){return"ltr"==(e||t.getComputedStyle("direction"))?"margin-left":"margin-right"}var r=CKEDITOR.dtd.$listItem,l=CKEDITOR.dtd.$list,o=CKEDITOR.TRISTATE_DISABLED,h=CKEDITOR.TRISTATE_OFF;CKEDITOR.plugins.add("indentblock",{requires:"indent",init:function(t){function e(){n.specificDefinition.apply(this,arguments),this.allowedContent={"div h1 h2 h3 h4 h5 h6 ol p pre ul":{propertiesOnly:!0,styles:s?null:"margin-left,margin-right",classes:s||null}},this.contentTransformations=[["div: splitMarginShorthand"],["h1: splitMarginShorthand"],["h2: splitMarginShorthand"],["h3: splitMarginShorthand"],["h4: splitMarginShorthand"],["h5: splitMarginShorthand"],["h6: splitMarginShorthand"],["ol: splitMarginShorthand"],["p: splitMarginShorthand"],["pre: splitMarginShorthand"],["ul: splitMarginShorthand"]],this.enterBr&&(this.allowedContent.div=!0),this.requiredContent=(this.enterBr?"div":"p")+(s?"("+s.join(",")+")":"{margin-left}"),this.jobs={20:{refresh:function(t,e){if((i=!(i=e.block||e.blockLimit).is(r)?(n=i.getAscendant(r))&&e.contains(n)||i:i).is(r)&&(i=i.getParent()),this.enterBr||this.getContext(e)){if(s){var n=s,i=i.$.className.match(this.classNameRegex),e=this.isIndent;return(n=i?!e||i[1]!=n.slice(-1):e)?h:o}return this.isIndent?h:i?CKEDITOR[(parseInt(i.getStyle(a(i)),10)||0)<=0?"TRISTATE_DISABLED":"TRISTATE_OFF"]:o}return o},exec:function(t){var e,n=(n=t.getSelection())&&n.getRanges()[0];if(e=t.elementPath().contains(l))i.call(this,e,s);else for(n=n.createIterator(),t=t.config.enterMode,n.enforceRealBlocks=!0,n.enlargeBr=t!=CKEDITOR.ENTER_BR;e=n.getNextParagraph(t==CKEDITOR.ENTER_P?"p":"div");)e.isReadOnly()||i.call(this,e,s);return!0}}}}var n=CKEDITOR.plugins.indent,s=t.config.indentClasses;n.registerCommands(t,{indentblock:new e(t,"indentblock",!0),outdentblock:new e(t,"outdentblock")}),CKEDITOR.tools.extend(e.prototype,n.specificDefinition.prototype,{context:{div:1,dl:1,h1:1,h2:1,h3:1,h4:1,h5:1,h6:1,ul:1,ol:1,p:1,pre:1,table:1},classNameRegex:s?new RegExp("(?:^|\\s+)("+s.join("|")+")(?=$|\\s)"):null})}})}();
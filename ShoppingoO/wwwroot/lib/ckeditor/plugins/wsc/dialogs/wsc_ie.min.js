CKEDITOR.dialog.add("checkspell",function(d){function t(i,a){var c=0;return function(){var t,e,n,o;"function"==typeof window.doSpell?(void 0!==l&&window.clearInterval(l),t=i,e=new window._SP_FCK_LangCompare,n=CKEDITOR.getUrl(d.plugins.wsc.path+"dialogs/"),o=n+"tmpFrameset.html",window.gFCKPluginName="wsc",e.setDefaulLangCode(d.config.defaultLanguage),window.doSpell({ctrl:r,lang:d.config.wsc_lang||e.getSPLangCode(d.langCode),intLang:d.config.wsc_uiLang||e.getSPLangCode(d.langCode),winType:s,onCancel:function(){t.hide()},onFinish:function(e){d.focus(),t.getParentEditor().setData(e.value),t.hide()},staticFrame:o,framesetPath:o,iframePath:n+"ciframe.html",schemaURI:n+"wsc.css",userDictionaryName:d.config.wsc_userDictionaryName,customDictionaryName:d.config.wsc_customDictionaryIds&&d.config.wsc_customDictionaryIds.split(","),domainName:d.config.wsc_domainName}),CKEDITOR.document.getById(g).setStyle("display","none"),CKEDITOR.document.getById(s).setStyle("display","block")):180==c++&&window._cancelOnError(a)}}var l,e=CKEDITOR.tools.getNextNumber(),s="cke_frame_"+e,r="cke_data_"+e,g="cke_error_"+e,n=d.lang.wsc.notAvailable,o='<textarea style="display: none" id="'+r+'" rows="10" cols="40"> </textarea><div id="'+g+'" style="display:none;color:red;font-size:16px;font-weight:bold;padding-top:160px;text-align:center;z-index:11;"></div><iframe src="" style="width:100%;background-color:#f1f1e3;" frameborder="0" name="'+s+'" id="'+s+'" allowtransparency="1"></iframe>',i=d.config.wsc_customLoaderScript||"https://loader.webspellchecker.net/sproxy_fck/sproxy.php?plugin=fck2&customerid="+d.config.wsc_customerId+"&cmd=script&doc=wsc&schema=22";return d.config.wsc_customLoaderScript&&(n+='<p style="color:#000;font-size:11px;font-weight: normal;text-align:center;padding-top:10px">'+d.lang.wsc.errorLoading.replace(/%s/g,d.config.wsc_customLoaderScript)+"</p>"),window._cancelOnError=function(e){var t;void 0===window.WSC_Error&&(CKEDITOR.document.getById(s).setStyle("display","none"),(t=CKEDITOR.document.getById(g)).setStyle("display","block"),t.setHtml(e||d.lang.wsc.notAvailable))},{title:d.config.wsc_dialogTitle||d.lang.wsc.title,minWidth:485,minHeight:380,buttons:[CKEDITOR.dialog.cancelButton],onShow:function(){var e=this.getContentElement("general","content").getElement();e.setHtml(o),e.getChild(2).setStyle("height",this._.contentSize.height+"px"),"function"!=typeof window.doSpell&&CKEDITOR.document.getHead().append(CKEDITOR.document.createElement("script",{attributes:{type:"text/javascript",src:i}})),e=d.getData(),CKEDITOR.document.getById(r).setValue(e),l=window.setInterval(t(this,n),250)},onHide:function(){window.ooo=void 0,window.int_framsetLoaded=void 0,window.framesetLoaded=void 0,window.is_window_opened=!1},contents:[{id:"general",label:d.config.wsc_dialogTitle||d.lang.wsc.title,padding:0,elements:[{type:"html",id:"content",html:""}]}]}}),CKEDITOR.dialog.on("resize",function(e){var t=(e=e.data).dialog;"checkspell"==t._.name&&((t=(t=t.getContentElement("general","content").getElement())&&t.getChild(2))&&t.setSize("height",e.height),t&&t.setSize("width",e.width))});
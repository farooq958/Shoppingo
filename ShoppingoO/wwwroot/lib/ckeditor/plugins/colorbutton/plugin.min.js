!function(){var E,t,y;CKEDITOR.plugins.add("colorbutton",{requires:"panelbutton,floatpanel",lang:"af,ar,az,bg,bn,bs,ca,cs,cy,da,de,de-ch,el,en,en-au,en-ca,en-gb,eo,es,es-mx,et,eu,fa,fi,fo,fr,fr-ca,gl,gu,he,hi,hr,hu,id,is,it,ja,ka,km,ko,ku,lt,lv,mk,mn,ms,nb,nl,no,oc,pl,pt,pt-br,ro,ru,si,sk,sl,sq,sr,sr-latn,sv,th,tr,tt,ug,uk,vi,zh,zh-cn",icons:"bgcolor,textcolor",hidpi:!0,init:function(g){function t(t){function n(t,o,e){var n,r={};if(t&&(r.color=t),o&&(r.colorName=o),o=!CKEDITOR.tools.isEmpty(r)&&new CKEDITOR.style(((n=g.config["colorButton_"+i+"Style"]).childRule="back"==i?C:function(t){return!(t.is("a")||t.getElementsByTag("a").count())||C(t)},n),r),g.execCommand(s,{newStyle:o}),t&&e)for(e.addColor(t.substr(1).toUpperCase()),t=l.element.find("[role=option]").toArray(),e=0;e<t.length;e++)t[e].setAttributes({"aria-posinset":e+1,"aria-setsize":t.length})}var o=t.name,i=t.type,e=t.title,r=t.order,s=t.commandName;t=t.contentTransformations||{};var l,a=new CKEDITOR.style(p["colorButton_"+i+"Style"]),c=CKEDITOR.tools.getNextId()+"_colorBox",u={type:i},h=new CKEDITOR.style(p["colorButton_"+i+"Style"],{color:"inherit"}),d=CKEDITOR.tools.addFunction(function(t,o,e){g.focus(),g.fire("saveSnapshot"),"?"==t?g.getColorFromDialog(function(t){t&&n(t,o,f)},null,u):n(t&&"#"+t,o,f),e&&(e.setAttribute("cke_colorlast",!0),g.once("selectionChange",function(){e.removeAttribute("cke_colorlast")}))}),f=y.getRowLimit(g)?new y(g,"back"==i?"background-color":"color",d):void 0;g.addCommand(s,{contextSensitive:!0,exec:function(t,o){t.readOnly||(o=o.newStyle,t.removeStyle(h),t.focus(),o&&t.applyStyle(o),t.fire("saveSnapshot"))},refresh:function(t,o){h.checkApplicable(o,t,t.activeFilter)?h.checkActive(o,t)?this.setState(CKEDITOR.TRISTATE_ON):this.setState(CKEDITOR.TRISTATE_OFF):this.setState(CKEDITOR.TRISTATE_DISABLED)}}),g.ui.add(o,CKEDITOR.UI_PANELBUTTON,{label:e,title:e,command:s,editorFocus:0,toolbar:"colors,"+r,allowedContent:a,requiredContent:a,contentTransformations:t,panel:{css:CKEDITOR.skin.getPath("editor"),attributes:{role:"listbox","aria-label":b.panelTitle}},select:function(t){var o=p.colorButton_colors.split(",");t=CKEDITOR.tools.array.find(o,t),t=E.normalizeColor(t),m(l,t),l._.markFirstDisplayed()},onBlock:function(t,o){(l=o).autoSize=!0,o.element.addClass("cke_colorblock"),o.element.setHtml(function(t,o,e){var n=[],r=p.colorButton_colors.split(","),i=g.plugins.colordialog&&p.colorButton_enableMore;e=r.length+e+(i?1:0);var s=1;for(p.colorButton_enableAutomatic&&(e+=1,s+=1,n.push('<a class="cke_colorauto" _cke_focus=1 hidefocus=true',' title="',b.auto,'"',' draggable="false"',' ondragstart="return false;"',' onclick="CKEDITOR.tools.callFunction(',o,',null);return false;"'," href=\"javascript:void('",b.auto,"')\"",' role="option" aria-posinset="1" aria-setsize="',e,'">','<table role="presentation" cellspacing=0 cellpadding=0 width="100%">',"<tr>",'<td colspan="',g.config.colorButton_colorsPerRow,'" align="center">','<span class="cke_colorbox" id="',t,'"></span>',b.auto,"</td>","</tr>","</table>","</a>")),n.push('<table role="presentation" cellspacing=0 cellpadding=0 width="100%"><tbody>'),t=0;t<r.length;t++){0==t%g.config.colorButton_colorsPerRow&&n.push("</tr><tr>");var l=r[t].split("/"),a=l[0];(l=new E(g,{color:l[1]||a,label:l[1]?a:void 0},o)).setPositionIndex(s+t,e),n.push(l.getHtml())}return y.getRowLimit(g)&&y.renderContainer(n,g),i&&n.push("</tr>","<tr>",'<td colspan="',g.config.colorButton_colorsPerRow,'" align="center">','<a class="cke_colormore" _cke_focus=1 hidefocus=true',' title="',b.more,'"',' draggable="false"',' ondragstart="return false;"',' onclick="CKEDITOR.tools.callFunction(',o,",'?');return false;\""," href=\"javascript:void('",b.more,"')\"",' role="option" aria-posinset="',e,'" aria-setsize="',e,'">',b.more,"</a>","</td>"),n.push("</tr></tbody></table>"),n.join("")}(c,d,f?f.getLength():0)),o.element.getDocument().getBody().setStyle("overflow","hidden"),o.element.getAscendant({html:1}).setStyle("overflow","hidden"),CKEDITOR.ui.fire("ready",this);var e=o.keys,n="rtl"==g.lang.dir;e[n?37:39]="next",e[40]="next",e[9]="next",e[n?39:37]="prev",e[38]="prev",e[CKEDITOR.SHIFT+9]="prev",e[32]="click",f&&f.setContainer(o.element.findOne(".cke_colorhistory"))},onOpen:function(){var t=(n=g.getSelection())&&n.getStartElement(),o=g.elementPath(t),e="back"==i?"background-color":"color";if(o){for(t=o.block||o.blockLimit||g.document.getBody();o=t&&t.getComputedStyle(e)||"transparent","back"==i&&"transparent"==o&&t&&(t=t.getParent()););if(o&&"transparent"!=o||(o="#ffffff"),p.colorButton_enableAutomatic&&l.element.findOne("#"+c).setStyle("background-color",o),t=n&&n.getRanges()[0]){for(var n=new CKEDITOR.dom.walker(t),r=t.collapsed?t.startContainer:n.next(),t="";r;){if(r.type!==CKEDITOR.NODE_ELEMENT&&(r=r.getParent()),r=E.normalizeColor(r.getComputedStyle(e)),(t=t||r)!==r){t="";break}r=n.next()}"transparent"==t&&(t=""),"fore"==i&&(u.automaticTextColor="#"+E.normalizeColor(o)),u.selectionColor=t?"#"+t:"",m(l,t)}return o}}})}function C(t){return"false"==t.getAttribute("contentEditable")||t.getAttribute("data-nostyle")}function m(t,o){var e=t._.getItems(),n=t.element.findOne("[aria-selected]"),r=t.element.findOne("[cke_colorlast]");if(n&&n.removeAttribute("aria-selected"),r)r.setAttribute("aria-selected",!0);else for(n=0;n<e.count();n++)if(r=e.getItem(n),o&&o==E.normalizeColor(r.getAttribute("data-value"))){r.setAttribute("aria-selected",!0);break}}var o,e,p=g.config,b=g.lang.colorbutton;CKEDITOR.env.hc||(t({name:"TextColor",type:"fore",commandName:"textColor",title:b.textColorTitle,order:10,contentTransformations:[[{element:"font",check:"span{color}",left:function(t){return!!t.attributes.color},right:function(t){t.name="span",t.attributes.color&&(t.styles.color=t.attributes.color),delete t.attributes.color}}]]}),void 0!==(e=g.config.colorButton_normalizeBackground)&&!e||(o=[[{element:"span",left:function(t){var o=CKEDITOR.tools;return!("span"!=t.name||!t.styles||!t.styles.background)&&((t=o.style.parse.background(t.styles.background)).color&&1===o.object.keys(t).length)},right:function(t){var o=new CKEDITOR.style(g.config.colorButton_backStyle,{color:t.styles.background}).getDefinition();return t.name=o.element,t.styles=o.styles,t.attributes=o.attributes||{},t}}]]),t({name:"BGColor",type:"back",commandName:"bgColor",title:b.bgColorTitle,order:20,contentTransformations:o}))}}),E=CKEDITOR.tools.createClass({$:function(t,o,e){this.$=new CKEDITOR.dom.element("td"),this.color=CKEDITOR.tools._isValidColorFormat(o.color)?o.color:"",this.clickFn=e,this.label=o.label||E.colorNames(t)[this.color]||this.color,this.setHtml()},statics:{colorNames:function(t){return t.lang.colorbutton.colors},normalizeColor:function(t){var o=/^(rgb|hsl)a\(/g.test(t),e=/^rgba\((\s*0\s*,?){4}\)$/g.test(t);return o&&!e?(t=new CKEDITOR.tools.color(t),CKEDITOR.tools.normalizeHex(t.getHex()||"").replace(/#/g,"")):CKEDITOR.tools.normalizeHex("#"+CKEDITOR.tools.convertRgbToHex(t||"")).replace(/#/g,"")}},proto:{getElement:function(){return this.$},getHtml:function(){return this.getElement().getOuterHtml()},setHtml:function(){this.getElement().setHtml('<a class="cke_colorbox" _cke_focus=1 hidefocus=true title="'+this.label+'" draggable="false" ondragstart="return false;" onclick="CKEDITOR.tools.callFunction('+this.clickFn+",'"+this.color+"','"+this.label+"', this); return false;\" href=\"javascript:void('"+this.color+'\')" data-value="'+this.color+'" role="option"><span class="cke_colorbox" style="background-color:#'+this.color+'"></span></a>')},setPositionIndex:function(t,o){this.getElement().getChild(0).setAttributes({"aria-posinset":t,"aria-setsize":o})}}}),t=CKEDITOR.tools.createClass({$:function(){this.$=new CKEDITOR.dom.element("tr"),this.$.addClass("cke_colorhistory_row"),this.boxes=[]},proto:{getElement:function(){return this.$},removeLastColor:function(){return this.getElement().getLast().remove(),this.boxes.pop()},addNewColor:function(t){this.boxes.unshift(t),this.getElement().append(t.getElement(),!0)},extractColorBox:function(o){var t=CKEDITOR.tools.getIndex(this.boxes,function(t){return t.color===o});return t<0?null:(this.boxes[t].getElement().remove(),this.boxes.splice(t,1)[0])}}}),y=CKEDITOR.tools.createClass({$:function(t,o,e){this.editor=t,this.cssProperty=o,this.clickFn=e,this.rows=[],this._.addNewRow(),this.editor.config.colorButton_renderContentColors&&this.editor.once("instanceReady",function(){this.renderContentColors()},this)},statics:{renderContainer:function(t,o){t.push('</tbody><tbody class="cke_colorhistory" style="display:none;">',"<tr>",'<td colspan="',o.config.colorButton_colorsPerRow,'" align="center">',"<span><hr></span>","</td>","</tr>","</tbody><tbody>")},getRowLimit:function(t){return t.config.colorButton_historyRowLimit},getCapacity:function(t){return y.getRowLimit(t)*t.config.colorButton_colorsPerRow},colorList:CKEDITOR.tools.style.parse._colors},_:{countColors:function(){var t=CKEDITOR.tools.getStyledSpans(this.cssProperty,this.editor.editable());return CKEDITOR.tools.array.reduce(t,function(t,o){o=this._.getHexCode(o,this.cssProperty,y.colorList);return t[o]=t[o]||0,t[o]+=1,t},{},this)},getHexCode:function(t,o,e){var n=t.getStyle(o);return n in e?e[n].substr(1):E.normalizeColor(t.getComputedStyle(o)).toUpperCase()},sortByOccurrencesAscending:function(t,o){var e,n=[];for(e in t){var r={};r[o]=e,r.frequency=t[e],n.push(r)}return n.sort(function(t,o){return o.frequency-t.frequency}),this._.trimToCapacity(n),n.reverse()},trimToCapacity:function(t){t.splice(y.getCapacity(this.editor))},addColors:function(t){CKEDITOR.tools.array.forEach(t,function(t){this.addColor(t.colorCode)},this)},extractColorBox:function(t){for(var o=0;o<this.rows.length;o++){var e=this.rows[o].extractColorBox(t);if(e)return e}return null},moveToBeginning:function(t){this.rows[0].addNewColor(t)},createAtBeginning:function(t){this._.moveToBeginning(new E(this.editor,{color:t},this.clickFn))},addNewRow:function(){this.rows.push(new t),this.container&&this.container.append(this.rows[this.rows.length-1].getElement())},alignRows:function(){for(var t=0;t<y.getRowLimit(this.editor)&&!(this.rows[t].boxes.length<=this.editor.config.colorButton_colorsPerRow);t++)this.rows[t+1]?this._.moveLastBoxToNextRow(t):t<y.getRowLimit(this.editor)-1?(this._.addNewRow(),this._.moveLastBoxToNextRow(t)):this.rows[t].removeLastColor()},moveLastBoxToNextRow:function(t){this.rows[t+1].addNewColor(this.rows[t].removeLastColor())},refreshPositions:function(){var o=this._.countPanelElements(),e=this._.calculateFirstPosition(o);CKEDITOR.tools.array.forEach(this.rows,function(t){CKEDITOR.tools.array.forEach(t.boxes,function(t){t.setPositionIndex(e,o),e+=1})})},countPanelElements:function(){var t=this.editor.config.colorButton_colors.split(",").length+this.getLength();return this.editor.plugins.colordialog&&this.editor.config.colorButton_enableMore&&(t+=1),this.editor.config.colorButton_enableAutomatic&&(t+=1),t},calculateFirstPosition:function(t){return this.editor.plugins.colordialog&&this.editor.config.colorButton_enableMore?t-this.getLength():t-this.getLength()+1},attachRows:function(){CKEDITOR.tools.array.forEach(this.rows,function(t){this.container.append(t.getElement())},this)}},proto:{setContainer:function(t){this.container=t,this._.attachRows(),this.getLength()&&this.show()},show:function(){this.container&&this.container.show()},renderContentColors:function(){var t=this._.countColors();CKEDITOR.tools.isEmpty(t)||(t=this._.sortByOccurrencesAscending(t,"colorCode"),this._.addColors(t),this._.refreshPositions())},addColor:function(t){var o=this._.extractColorBox(t);this.container&&!this.container.isVisible()&&this.show(),o?this._.moveToBeginning(o):this._.createAtBeginning(t),this._.alignRows()},getLength:function(){return CKEDITOR.tools.array.reduce(this.rows,function(t,o){return t+o.boxes.length},0)}}})}(),CKEDITOR.config.colorButton_enableMore=!0,CKEDITOR.config.colorButton_colors="1ABC9C,2ECC71,3498DB,9B59B6,4E5F70,F1C40F,16A085,27AE60,2980B9,8E44AD,2C3E50,F39C12,E67E22,E74C3C,ECF0F1,95A5A6,DDD,FFF,D35400,C0392B,BDC3C7,7F8C8D,999,000",CKEDITOR.config.colorButton_foreStyle={element:"span",styles:{color:"#(color)"},overrides:[{element:"font",attributes:{color:null}}]},CKEDITOR.config.colorButton_backStyle={element:"span",styles:{"background-color":"#(color)"}},CKEDITOR.config.colorButton_enableAutomatic=!0,CKEDITOR.config.colorButton_colorsPerRow=6,CKEDITOR.config.colorButton_historyRowLimit=1,CKEDITOR.config.colorButton_renderContentColors=!0;
!function(){function O(e){return CKEDITOR.env.ie?e.$.clientWidth:parseInt(e.getComputedStyle("width"),10)}function x(e,t){var o=e.getComputedStyle("border-"+t+"-width"),t={thin:"0px",medium:"1px",thick:"2px"};return o.indexOf("px")<0&&(o=o in t&&"none"!=e.getComputedStyle("border-style")?t[o]:0),parseFloat(o)}function I(e){(e.data||e).preventDefault()}function d(m){function t(){g=0,E.setOpacity(0),v&&function(){for(var r=c.rtl,l=(r?D:y).length,s=0,e=0;e<l;e++){var t=y[e],o=D[e],d=c.table;CKEDITOR.tools.setTimeout(function(e,t,o,n,a,i){e&&e.setStyle("width",w(Math.max(t+i,1))),o&&o.setStyle("width",w(Math.max(n-i,1))),a&&d.setStyle("width",w(a+i*(r?-1:1))),++s==l&&m.fire("saveSnapshot")},0,this,[t,t&&O(t),o,o&&O(o),(!t||!o)&&O(d)+x(d,"left")+x(d,"right"),v])}}();var e=c.table;setTimeout(function(){e.removeCustomData("_cke_table_pillars")},0),T.removeListener("dragstart",I)}function a(e){I(e),m.fire("saveSnapshot"),e=c.index;for(var t=CKEDITOR.tools.buildTableMap(c.table),o=[],n=[],a=Number.MAX_VALUE,i=a,r=c.rtl,l=0,s=t.length;l<s;l++){var d=(u=t[l])[e+(r?1:0)],u=u[e+(r?0:1)],d=d&&new CKEDITOR.dom.element(d),u=u&&new CKEDITOR.dom.element(u);d&&u&&d.equals(u)||(d&&(a=Math.min(a,O(d))),u&&(i=Math.min(i,O(u))),o.push(d),n.push(u))}y=o,D=n,b=c.x-a,C=c.x+i,E.setOpacity(.5),p=parseInt(E.getStyle("left"),10),v=0,g=1,E.on("mousemove",f),T.on("dragstart",I),T.on("mouseup",h,this)}function h(e){e.removeListener(),t()}function f(e){o(e.data.getPageOffset().x)}var c,g,p,v,o,y,D,b,C,T=m.document,E=CKEDITOR.dom.element.createFromHtml('<div data-cke-temp=1 contenteditable=false unselectable=on style="position:absolute;cursor:col-resize;filter:alpha(opacity=0);opacity:0;padding:0;background-color:#004;background-image:none;border:0px none;z-index:10000"></div>',T);m.on("destroy",function(){E.remove()}),i||T.getDocumentElement().append(E),this.attachTo=function(e){var t,o,n;g||(i&&(T.getBody().append(E),v=0),t=(c=e).alignedPillars[0],o=c.alignedPillars[c.alignedPillars.length-1],n=t.y,t=o.height+o.y-t.y,E.setStyles({width:w(e.width),height:w(t),left:w(e.x),top:w(n)}),i&&E.setOpacity(.25),E.on("mousedown",a,this),T.getBody().setStyle("cursor","col-resize"),E.show())},o=this.move=function(e,t){if(!c)return 0;if(!(g||e>=c.x&&e<=c.x+c.width&&t>=c.y&&t<=c.y+c.height))return c=null,g=v=0,T.removeListener("mouseup",h),E.removeListener("mousedown",a),E.removeListener("mousemove",f),T.getBody().setStyle("cursor","auto"),i?E.remove():E.hide(),0;e-=Math.round(E.$.offsetWidth/2);if(g){if(e==b||e==C)return 1;e=Math.max(e,b),e=Math.min(e,C),v=e-p}return E.setStyle("left",w(e)),1}}function u(e){var t=e.data.getTarget();if("mouseout"==e.name){if(!t.is("table"))return;for(var o=new CKEDITOR.dom.element(e.data.$.relatedTarget||e.data.$.toElement);o&&o.$&&!o.equals(t)&&!o.is("body");)o=o.getParent();if(!o||o.equals(t))return}t.getAscendant("table",1).removeCustomData("_cke_table_pillars"),e.removeListener()}var w=CKEDITOR.tools.cssLength,i=CKEDITOR.env.ie&&(CKEDITOR.env.ie7Compat||CKEDITOR.env.quirks);CKEDITOR.plugins.add("tableresize",{requires:"tabletools",init:function(s){s.on("contentDom",function(){var l,e=s.editable();e.attachListener(e.isInline()?e:s.document,"mousemove",function(e){var h,f,c,g,t;if((a=(e=e.data).getTarget()).type==CKEDITOR.NODE_ELEMENT){var o=e.getPageOffset().x,n=e.getPageOffset().y;if(l&&l.move(o,n))I(e);else if((a.is("table")||a.getAscendant({thead:1,tbody:1,tfoot:1},1))&&(e=a.getAscendant("table",1),s.editable().contains(e))){(a=e.getCustomData("_cke_table_pillars"))||(e.setCustomData("_cke_table_pillars",(f=[],c={},g="rtl"===(h=e).getComputedStyle("direction"),t=CKEDITOR.tools.array.zip(new CKEDITOR.dom.nodeList(h.$.rows).toArray(),CKEDITOR.tools.buildTableMap(h)),CKEDITOR.tools.array.forEach(t,function(e){var t=e[0].$;e=e[1];var o=-1,n=0,a=null;a=t?{height:(n=new CKEDITOR.dom.element(t)).$.offsetHeight,position:n.getDocumentPosition()}:void 0;for(var t=CKEDITOR.env.ie&&!CKEDITOR.env.edge,i="collapse"===h.getComputedStyle("border-collapse"),n=a.height,a=a.position,r=0;r<e.length;r++){var l,s,d=new CKEDITOR.dom.element(e[r]),u=e[r+1]&&new CKEDITOR.dom.element(e[r+1]),m=d.getDocumentPosition().x,o=o+(d.$.colSpan||1);g?s=m+x(d,"left"):l=m+d.$.offsetWidth-x(d,"right"),u?(m=u.getDocumentPosition().x,g?l=m+u.$.offsetWidth-x(u,"right"):s=m+x(u,"left")):(m=h.getDocumentPosition().x,g?l=m:s=m+h.$.offsetWidth),d=Math.max(s-l,3),t&&i&&(l-=d,d=Math.max(s-l,3)),d={table:h,index:o,x:l,y:a.y,width:d,height:n,rtl:g},c[o]=c[o]||[],c[o].push(d),d.alignedPillars=c[o],f.push(d)}}),a=f)),e.on("mouseout",u),e.on("mousedown",u));e:{e=a;for(var a=0,i=e.length;a<i;a++){var r=e[a];if(o>=r.x&&o<=r.x+r.width&&n>=r.y&&n<=r.y+r.height){o=r;break e}}o=null}o&&(l=!l?new d(s):l).attachTo(o)}}})})}})}();
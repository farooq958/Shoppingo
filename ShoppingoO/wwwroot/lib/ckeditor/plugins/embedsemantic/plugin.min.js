CKEDITOR.plugins.add("embedsemantic",{icons:"embedsemantic",hidpi:!0,requires:"embedbase",onLoad:function(){this.registerOembedTag()},init:function(t){var e=CKEDITOR.plugins.embedBase.createWidgetBaseDefinition(t),a=e.init;CKEDITOR.tools.extend(e,{dialog:"embedBase",button:t.lang.embedbase.button,allowedContent:"oembed",requiredContent:"oembed",styleableElements:"oembed",providerUrl:new CKEDITOR.template(t.config.embed_provider||"//ckeditor.iframe.ly/api/oembed?url={url}&callback={callback}"),init:function(){var e=this;a.call(this),this.once("ready",function(){this.data.loadOnReady&&this.loadContent(this.data.url,{callback:function(){e.setData("loadOnReady",!1),t.fire("updateSnapshot")}})})},upcast:function(e,t){if("oembed"==e.name){var a=e.children[0];if(a&&a.type==CKEDITOR.NODE_TEXT&&a.value)return t.url=a.value,t.loadOnReady=!0,a=new CKEDITOR.htmlParser.element("div"),e.replaceWith(a),a.attributes.class=e.attributes.class,a}},downcast:function(e){var t=new CKEDITOR.htmlParser.element("oembed");return t.add(new CKEDITOR.htmlParser.text(this.data.url)),e.attributes.class&&(t.attributes.class=e.attributes.class),t}},!0),t.widgets.add("embedSemantic",e)},registerOembedTag:function(){var e,t=CKEDITOR.dtd;for(e in t.oembed={"#":1},t)t[e].div&&(t[e].oembed=1)}});